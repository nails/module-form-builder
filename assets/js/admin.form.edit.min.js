var _ADMIN_FORM_EDIT;_ADMIN_FORM_EDIT=function(e,t,o){var n=this;return n.domElement=e||null,n.tplField=$(".js-template-field",n.domElement).html(),n.tplOption=$(".js-template-field-option",n.domElement).html(),n.fieldsTable=$(".form-builder__fields",n.domElement),n.fieldCount=0,n.typeWithOptions=t||[],n.typeWithDefaultValue=o||[],n.__construct=function(){$(n.domElement).on("change",".field-type",function(){n.fieldTypeChanged($(this))}),$(".js-add-field",n.domElement).on("click",function(){return n.addField(),!1}),$(n.domElement).on("click",".js-remove-field",function(){return n.removeField($(this)),!1}),$(n.domElement).on("click",".js-add-option",function(){return n.addOption($(this)),!1}),$(n.domElement).on("click",".js-manage-option",function(){return n.manageOptions($(this)),!1}),$(n.domElement).on("click",".js-remove-option",function(){return n.removeOption($(this)),!1}),$("td.type .field-type",n.fieldsTable).each(function(){$(this).trigger("change")}),n.fieldCount=$("tbody tr",n.fieldsTable).length-1,$(n.fieldsTable).sortable({items:"tbody",handle:".handle",axis:"y",placeholder:"placeholder",helper:function(e,t){var o=t.find("td"),n=t.clone();return n.find("td").each(function(e){$(this).width(o.eq(e).outerWidth())}),n.css({"margin-left":"-1px","box-shadow":"0px 2px 5px rgba(0, 0, 0, 0.25)"}),n},start:function(e,t){t.placeholder.append('<tr><td colspan="9"><div></div></td></tr>'),t.placeholder.find("td").height(t.helper.outerHeight()),t.placeholder.find("td").width(t.helper.outerWidth())}})},n.addField=function(){n.fieldCount++,n.log("Adding new field");var e,t;return t={fieldNumber:n.fieldCount},e=Mustache.render(n.tplField,t),$("> tfoot",n.fieldsTable).before(e),$("> tbody",n.fieldsTable).last().find(".select2").select2(),$("> tbody",n.fieldsTable).last().find("td.type .field-type").trigger("change"),n},n.removeField=function(e){var t=e.data("field-number");return n.log("Removing field: "+t),e.closest("tbody").remove(),$(".form-field-options-"+t,n.domElement).remove(),n},n.addOption=function(e){var t,o,i,l,s;return t=e.data("field-number"),i=e.closest("table"),o=i.data("option-count")||0,n.log("Adding Option for field: "+t),n.log("Number of existing options: "+o),s={fieldNumber:t,optionNumber:o},l=Mustache.render(n.tplOption,s),i.find("tbody").append(l),o++,n.log("New option count: "+o),i.data("option-count",o),n},n.manageOptions=function(e){var t=e.data("field-number");n.log("Managing options for field: "+t);var o=e.closest("tr").next();return o.hasClass("active")?o.find("td > .form-field-options").stop().slideUp(null,function(){o.removeClass("active")}):o.addClass("active").find("td > .form-field-options").stop().slideDown(),n},n.removeOption=function(e){var t;return t=e.data("field-number"),n.log("Removing option for field: "+t),e.closest("tr").remove(),n},n.fieldTypeChanged=function(e){var t=e.val();return n.log("Field type changed to: "+t),n.doesSupportOptions(t)?(n.log("Supports options; showing"),e.siblings("a").addClass("is-active")):(n.log("Does not support options; hiding"),e.siblings("a").removeClass("is-active"),e.closest("tr").next().removeClass("active")),n.doesSupportDefaultValue(t)?(n.log("Supports default value; showing"),e.closest("tr").find("td.default .js-supports-default-value").show(),e.closest("tr").find("td.default .js-no-default-value").hide()):(n.log("Does not support default value; hiding"),e.closest("tr").find("td.default .js-supports-default-value").hide(),e.closest("tr").find("td.default .js-no-default-value").show()),n.doesSupportOptionSelect(t)?(n.log("Supports option selection; showing"),e.closest("tbody").find("tr.options table").addClass("is-selectable"),console.log(e.closest("table"))):(n.log("Does not support option selection; hiding"),e.closest("tbody").find("tr.options table").removeClass("is-selectable"),e.closest("tbody").find("tr.options .option-selected").prop("checked",!1)),n.doesSupportOptionDisable(t)?(n.log("Supports option disabling; showing"),e.closest("tbody").find("tr.options table").addClass("is-disableable")):(n.log("Does not support option disabling; hiding"),e.closest("tbody").find("tr.options table").removeClass("is-disableable"),e.closest("tbody").find("tr.options .option-disabled").prop("checked",!1)),n},n.doesSupportOptions=function(e){for(var t=n.typeWithOptions.length-1;t>=0;t--)if(n.typeWithOptions[t].slug===e)return!0;return!1},n.doesSupportDefaultValue=function(e){for(var t=n.typeWithDefaultValue.length-1;t>=0;t--)if(n.typeWithDefaultValue[t].slug===e)return!0;return!1},n.doesSupportOptionSelect=function(e){for(var t=n.typeWithOptions.length-1;t>=0;t--)if(n.typeWithOptions[t].slug===e)return n.typeWithOptions[t].can_option_select;return!1},n.doesSupportOptionDisable=function(e){for(var t=n.typeWithOptions.length-1;t>=0;t--)if(n.typeWithOptions[t].slug===e)return n.typeWithOptions[t].can_option_disable;return!1},n.log=function(e,t){"function"==typeof console.log&&(void 0!==t?console.log("Nails Form Builder:",e,t):console.log("Nails Form Builder:",e))},n.warn=function(e,t){"function"==typeof console.warn&&(void 0!==t?console.warn("Nails Form Builder:",e,t):console.warn("Nails Form Builder:",e))},n.__construct()};
//# sourceMappingURL=admin.form.edit.min.js.map
