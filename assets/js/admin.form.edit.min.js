var _ADMIN_FORM_EDIT;_ADMIN_FORM_EDIT=function(t,e,o){var n=this;return n.domElement=t||null,n.tplField=$(".js-template-field",n.domElement).html(),n.tplOption=$(".js-template-field-option",n.domElement).html(),n.fieldsTable=$(".form-builder__fields",n.domElement),n.fieldCount=0,n.typeWithOptions=e||[],n.typeWithDefaultValue=o||[],n.__construct=function(){$(n.domElement).on("change",".field-type",function(){n.fieldTypeChanged($(this))}),$(".js-add-field",n.domElement).on("click",function(){return n.addField(),!1}),$(n.domElement).on("click",".js-remove-field",function(){return n.removeField($(this)),!1}),$(n.domElement).on("click",".js-add-option",function(){return n.addOption($(this)),!1}),$(n.domElement).on("click",".js-manage-option",function(){return n.manageOptions($(this)),!1}),$(n.domElement).on("click",".js-remove-option",function(){return n.removeOption($(this)),!1}),$("td.type .field-type",n.fieldsTable).each(function(){$(this).trigger("change")}),n.fieldCount=$("tbody tr",n.fieldsTable).length-1,$(n.fieldsTable).sortable({items:"tbody",handle:".handle",axis:"y",placeholder:"placeholder",helper:function(t,e){var o=e.find("td"),n=e.clone();return n.find("td").each(function(t){$(this).width(o.eq(t).outerWidth())}),n.css({"margin-left":"-1px","box-shadow":"0px 2px 5px rgba(0, 0, 0, 0.25)"}),n},start:function(t,e){e.placeholder.append('<tr><td colspan="9"><div></div></td></tr>'),e.placeholder.find("td").height(e.helper.outerHeight()),e.placeholder.find("td").width(e.helper.outerWidth())}})},n.addField=function(){n.fieldCount++,n.log("Adding new field");var t,e;return e={fieldNumber:n.fieldCount},t=Mustache.render(n.tplField,e),$("> tfoot",n.fieldsTable).before(t),$("> tbody",n.fieldsTable).last().find(".select2").select2(),$("> tbody",n.fieldsTable).last().find("td.type .field-type").trigger("change"),n},n.removeField=function(t){var e=t.data("field-number");return n.log("Removing field: "+e),t.closest("tbody").remove(),$(".form-field-options-"+e,n.domElement).remove(),n},n.addOption=function(t){var e,o,i,l,d;return e=t.data("field-number"),i=t.closest("table"),o=i.data("option-count")||0,n.log("Adding Option for field: "+e),n.log("Number of existing options: "+o),d={fieldNumber:e,optionNumber:o},l=Mustache.render(n.tplOption,d),i.find("tbody").append(l),o++,n.log("New option count: "+o),i.data("option-count",o),n},n.manageOptions=function(t){var e=t.data("field-number");n.log("Managing options for field: "+e);var o=t.closest("tr").next();return o.hasClass("active")?o.find("td > .form-field-options").stop().slideUp(null,function(){o.removeClass("active")}):o.addClass("active").find("td > .form-field-options").stop().slideDown(),n},n.removeOption=function(t){var e;return e=t.data("field-number"),n.log("Removing option for field: "+e),t.closest("tr").remove(),n},n.fieldTypeChanged=function(t){var e=t.val();return n.log("Field type changed to: "+e),n.doesSupportOptions(e)?(n.log("Supports options; showing"),t.siblings("a").addClass("is-active")):(n.log("Does not support options; hiding"),t.siblings("a").removeClass("is-active"),t.closest("tr").next().removeClass("active")),n.doesSupportDefaultValue(e)?(n.log("Supports default value; showing"),t.closest("tr").find("td.default .js-supports-default-value").show(),t.closest("tr").find("td.default .js-no-default-value").hide()):(n.log("Does not support default value; hiding"),t.closest("tr").find("td.default .js-supports-default-value").hide(),t.closest("tr").find("td.default .js-no-default-value").show()),n.doesSupportOptionSelect(e)?(n.log("Supports option selection; showing"),t.closest("tbody").find("tr.options .option-selected").show()):(n.log("Does not support option selection; hiding"),t.closest("tbody").find("tr.options .option-selected").hide(),t.closest("tbody").find("tr.options .option-selected").prop("checked",!1)),n.doesSupportOptionDisable(e)?(n.log("Supports option disabling; showing"),t.closest("tbody").find("tr.options .option-disabled").show()):(n.log("Does not support option disabling; hiding"),t.closest("tbody").find("tr.options .option-disabled").hide(),t.closest("tbody").find("tr.options .option-disabled").prop("checked",!1)),n},n.doesSupportOptions=function(t){for(var e=n.typeWithOptions.length-1;e>=0;e--)if(n.typeWithOptions[e].slug===t)return!0;return!1},n.doesSupportDefaultValue=function(t){for(var e=n.typeWithDefaultValue.length-1;e>=0;e--)if(n.typeWithDefaultValue[e].slug===t)return!0;return!1},n.doesSupportOptionSelect=function(t){for(var e=n.typeWithOptions.length-1;e>=0;e--)if(n.typeWithOptions[e].slug===t)return n.typeWithOptions[e].can_option_select;return!1},n.doesSupportOptionDisable=function(t){for(var e=n.typeWithOptions.length-1;e>=0;e--)if(n.typeWithOptions[e].slug===t)return n.typeWithOptions[e].can_option_disable;return!1},n.log=function(t,e){"function"==typeof console.log&&(void 0!==e?console.log("Nails Form Builder:",t,e):console.log("Nails Form Builder:",t))},n.warn=function(t,e){"function"==typeof console.warn&&(void 0!==e?console.warn("Nails Form Builder:",t,e):console.warn("Nails Form Builder:",t))},n.__construct()};
//# sourceMappingURL=admin.form.edit.min.js.map
