var _ADMIN_FORM_EDIT;_ADMIN_FORM_EDIT=function(e,t,o){var l=this;return l.domElement=e||null,l.tplField=$(".js-template-field",l.domElement).html(),l.tplOption=$(".js-template-field-option",l.domElement).html(),l.fieldsTable=$(".form-builder__fields",l.domElement),l.fieldCount=0,l.typeWithOptions=t||[],l.typeWithDefaultValue=o||[],l.__construct=function(){$(l.domElement).on("change",".field-type",function(){l.fieldTypeChanged($(this))}),$(l.domElement).on("change",".field-default",function(){l.fieldDefaultChanged($(this))}),$(".js-add-field",l.domElement).on("click",function(){return l.addField(),!1}),$(l.domElement).on("click",".js-remove-field",function(){return l.removeField($(this)),!1}),$(l.domElement).on("click",".js-add-option",function(){return l.addOption($(this)),!1}),$(l.domElement).on("click",".js-manage-option",function(){return l.manageOptions($(this)),!1}),$(l.domElement).on("click",".js-remove-option",function(){return l.removeOption($(this)),!1}),$("td.type .field-type, td.default .field-default",l.fieldsTable).each(function(){$(this).trigger("change")}),l.fieldCount=$("tbody tr",l.fieldsTable).length-1,$(l.fieldsTable).sortable({items:"tbody",handle:".handle",axis:"y",placeholder:"placeholder",helper:function(e,t){var o=t.find("td"),l=t.clone();return l.find("td").each(function(e){$(this).width(o.eq(e).outerWidth())}),l.css({"margin-left":"-1px","box-shadow":"0px 2px 5px rgba(0, 0, 0, 0.25)"}),l},start:function(e,t){t.placeholder.append('<tr><td colspan="9"><div></div></td></tr>'),t.placeholder.find("td").height(t.helper.outerHeight()),t.placeholder.find("td").width(t.helper.outerWidth())}})},l.addField=function(){l.fieldCount++,l.log("Adding new field");var e,t;return t={fieldNumber:l.fieldCount},e=Mustache.render(l.tplField,t),$("> tfoot",l.fieldsTable).before(e),$("> tbody",l.fieldsTable).last().find(".select2").select2(),$("> tbody",l.fieldsTable).last().find("td.type .field-type").trigger("change"),$("> tbody",l.fieldsTable).last().find("td.type .field-default").trigger("change"),l},l.removeField=function(e){var t=e.data("field-number");return l.log("Removing field: "+t),e.closest("tbody").remove(),$(".form-field-options-"+t,l.domElement).remove(),l},l.addOption=function(e){var t,o,n,i,d;return t=e.data("field-number"),n=e.closest("table"),o=n.data("option-count")||0,l.log("Adding Option for field: "+t),l.log("Number of existing options: "+o),d={fieldNumber:t,optionNumber:o},i=Mustache.render(l.tplOption,d),n.find("tbody").append(i),o++,l.log("New option count: "+o),n.data("option-count",o),l},l.manageOptions=function(e){var t=e.data("field-number");l.log("Managing options for field: "+t);var o=e.closest("tr").next();return o.hasClass("active")?o.find("td > .form-field-options").stop().slideUp(null,function(){o.removeClass("active")}):o.addClass("active").find("td > .form-field-options").stop().slideDown(),l},l.removeOption=function(e){var t;return t=e.data("field-number"),l.log("Removing option for field: "+t),e.closest("tr").remove(),l},l.fieldTypeChanged=function(e){return l.log("Field type changed to: "+e.val()),$.inArray(e.val(),l.typeWithOptions)>=0?(l.log("Supports options; showing"),e.siblings("a").addClass("is-active")):(l.log("Does not support options; hiding"),e.siblings("a").removeClass("is-active"),e.closest("tr").next().removeClass("active")),$.inArray(e.val(),l.typeWithDefaultValue)>=0?(l.log("Supports default value; showing"),e.closest("tr").find("td.default .js-supports-default-value").show(),e.closest("tr").find("td.default .js-no-default-value").hide()):(l.log("Does not support default value; hiding"),e.closest("tr").find("td.default .js-supports-default-value").hide(),e.closest("tr").find("td.default .js-no-default-value").show()),l},l.fieldDefaultChanged=function(e){switch(l.log("Default value changed to: "+e.val()),e.val()){case"CUSTOM":e.siblings("input").addClass("is-active");break;default:e.siblings("input").removeClass("is-active")}return l},l.log=function(e,t){"function"==typeof console.log&&(void 0!==t?console.log("Nails Form Builder:",e,t):console.log("Nails Form Builder:",e))},l.warn=function(e,t){"function"==typeof console.warn&&(void 0!==t?console.warn("Nails Form Builder:",e,t):console.warn("Nails Form Builder:",e))},l.__construct()};
//# sourceMappingURL=admin.form.edit.min.js.map
